
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Creator</title>
    <link rel="stylesheet" href="index.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007acc"/>
    <script type="module" src="index.tsx"></script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>Image</h3>
                <label for="upload-input">Upload:</label>
                <div class="file-upload-wrapper">
                    <button class="btn file-btn">Choose File</button>
                    <span class="file-name">No file chosen...</span>
                    <input type="file" id="upload-input" accept="image/*">
                </div>
                <label for="scale-slider">Scale:</label>
                 <input type="range" id="scale-slider" min="0.1" max="5" step="0.05" value="1" disabled>
                <label for="color-detail-slider">Color Detail:</label>
                <input type="range" id="color-detail-slider" min="2" max="16" step="1" value="16" disabled>
            </div>

            <div class="sidebar-section">
                <h3>Colors</h3>
                <label for="size-select">Size:</label>
                <select id="size-select" class="select-css">
                    <option value="16x14">16x14</option>
                    <option value="24x12">24x12</option>
                    <option value="23x23">23x23</option>
                    <option value="37x23">37x23</option>
                    <option value="51x23">51x23</option>
                    <option value="51x26" selected>51x26</option>
                    <option value="66x26">66x26</option>
                    <option value="78x26">78x26</option>
                </select>
            </div>

            <div class="sidebar-section">
                <h3>Brush Tools</h3>
                 <label for="brush-tool-select">Brush Tool:</label>
                <select id="brush-tool-select" class="select-css">
                    <option value="pencil">Pencil (1px)</option>
                    <option value="square">Square</option>
                    <option value="circle">Circle</option>
                    <option value="bucket-area">Bucket (Area)</option>
                    <option value="bucket-global">Bucket (Global)</option>
                </select>
                 <label for="brush-size">Brush Size:</label>
                 <input type="number" id="brush-size" value="1" min="1" class="input-css">
                 <div class="button-group">
                    <button id="undo-btn" class="btn" disabled>Undo</button>
                    <button id="redo-btn" class="btn" disabled>Redo</button>
                 </div>
                 <button id="pan-mode-btn" class="btn" disabled>Pan Mode</button>
            </div>

            <div class="sidebar-section">
                <h3>Pattern Fill</h3>
                <p class="description">Fill the background with a random geometric pattern. This feature works completely offline.</p>
                <button id="generate-bg-btn" class="btn">Generate Background</button>
                <button id="stroke-selection-btn" class="btn">Stroke Selection</button>
            </div>

            <div class="sidebar-section">
                <h3>Export</h3>
                <button id="download-btn" class="btn">Download PNG</button>
            </div>
        </aside>

        <main class="main-content">
            <div class="canvas-wrapper">
                <canvas id="pixel-canvas"></canvas>
            </div>
             <div class="bottom-controls">
                <div class="canvas-preview-wrapper preview-box">
                    <p>Canvas Preview</p>
                    <canvas id="canvas-preview"></canvas>
                </div>
                <div id="color-palette" class="color-palette">
                    <!-- Colors will be injected here -->
                </div>
                <div id="original-image-preview" class="original-image-preview preview-box hidden">
                    <p>Original Image</p>
                    <img id="source-image" src="" alt="Original source image">
                </div>
            </div>
        </main>
    </div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>